---
title: "p8105_hw2_ars2376"
output: github_document
date: "2025-09-26"
---

```{r setup}
library(tidyverse)
```

# Problem 1

Cleaning data from pols-month.csv

```{r}
pols_df =
  read_csv("fivethirtyeight_datasets/pols-month.csv", na = c("NA", ".", "")) |> 
  separate(
    mon, into = c("year", "month", "day"), sep = "-") |> 
 mutate(
      month = case_match(
        month, 
        "01" ~ "Jan",
        "02" ~ "Feb",
        "03" ~ "Mar",
        "04" ~ "Apr",
        "05" ~ "May",
        "06" ~ "Jun",
        "07" ~ "Jul",
        "08" ~ "Aug",
        "09" ~ "Sep",
        "10" ~ "Oct",
        "11" ~ "Nov",
        "12" ~"Dec")) |> 
  
  mutate(prez = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem") 
) |> 
   select(-prez_dem, -prez_gop, -day)
```

```{r}
pols_df
```

Clean data from snp.csv

```{r}
snp_df =
  read.csv("fivethirtyeight_datasets/snp.csv", na = c("NA", ".", "")) |>
  separate(
    date, into = c("month", "day", "year"), sep = "/") |> 
 mutate(
      month = case_match(
        month, 
        "1" ~ "Jan",
        "2" ~ "Feb",
        "3" ~ "Mar",
        "4" ~ "Apr",
        "5" ~ "May",
        "6" ~ "Jun",
        "7" ~ "Jul",
        "8" ~ "Aug",
        "9" ~ "Sep",
        "10" ~ "Oct",
        "11" ~ "Nov",
        "12" ~"Dec")) |> 
  relocate(year,month)
```

```{r}
snp_df$year <- as.numeric(snp_df$year)
```

Change year variable to include 19 or 20

```{r}
snp_df <- mutate(snp_df, year = case_when(
  nchar(year) == 2 & as.numeric(year) > 0 & as.numeric(year) <= 15 ~ paste0("20", year),
  nchar(year) == 1 & as.numeric(year) >= 0 & as.numeric(year) <= 15 ~ paste0("200", year),
  nchar(year) == 2 & as.numeric(year) > 49 ~ paste0("19", year),
  TRUE ~ as.character(year)
))
```

```{r}
snp_df
```


Tidy unemployment.csv for merging

```{r}
unemp_df =
  read.csv("fivethirtyeight_datasets/unemployment.csv", na = c("NA", ".", "")) |> 
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemp_pct"
  ) |> 
  janitor::clean_names() |>  ## Changed Year to year
  mutate(year = as.character(year))
```

```{r}
unemp_df
```

Merge snp into pols

```{r}
pols_snp_df = 
  left_join(pols_df, snp_df, by = c("year","month"))
```

```{r}
pols_snp_df
```

Merge unemp into pols_snp

```{r}
final_df =
  left_join(pols_snp_df, unemp_df, by = c("year", "month"))
```

```{r}
final_df
```

Write-up

One of the datasets used is the `pols-month` dataset, which describes the number of national politicians who are Democratic or Republican at any given time. Some key variables include date of the count, whether the president was Democratic or Republic on the associated date, number of Republican governors, number of Republican senators, number of Republican representatives, number of Democratic governors, number of Democratic senators, and number of Democratic representatives. The `snp` dataset describes the closing values of the Standard & Poor stock market index for a set of dates. The `unemployment` dataset measures the percentage of unemployment. The `final_df` contains 822 observations of 12 variables and the date ranges from 1947 to 2015.